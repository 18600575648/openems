<md-sidenav-container fullscreen>
  <md-sidenav #sidenav mode="push">
    <md-list>
      <md-list-item>
        <button routerLinkActive="active" routerLink="/overview" md-button><span translate>Menu.Overview</span></button>
      </md-list-item>
      <md-list-item *ngIf="env.backend === 'OpenEMS Edge'">
        <!--TODO: is this link still necessary?-->
        <a href="/grafana/dashboard/file/fems-asymmetric.json" md-button><span translate>General.History</span></a>
      </md-list-item>
      <md-list-item>
        <button routerLinkActive="active" routerLink="/about" md-button><span translate>Menu.AboutUI</span></button>
      </md-list-item>
    </md-list>
  </md-sidenav>
  <div fxLayout="row" fxLayoutAlign="space-between left">
    <md-toolbar color="primary">
      <div fxFlex="40px">
        <button routerLinkActive="active" (click)="sidenav.toggle()" md-icon-button><md-icon>menu</md-icon></button>
      </div>
      <ng-container *ngIf="(websocket.currentDevice | async) as currentDevice">
        <div fxFlex>
          <!-- TODO show breadcrumbs like 'Energymonitor > History', 'Energymonitor > Settings' -->
          <button routerLink="/device/{{ currentDevice.name }}/overview" md-button>Energiemonitor <small>({{ currentDevice.name }})</small></button>
        </div>
        <div fxFlex="50px" *ngIf="currentDevice.role != 'guest'">
          <button routerLink="/device/{{ currentDevice.name }}/config" md-icon-button><md-icon>settings</md-icon></button>
        </div>
      </ng-container>
      <!-- <ng-container *ngIf="!currentDevice">
        <div>
          <button routerLink="/overview" md-button>FEMS</button>
        </div>
      </ng-container> -->
    </md-toolbar>
  </div>
  <!--   -->
  <div *ngIf="websocket.status == 'connecting'" fxLayout fxLayoutAlign="center start" fxLayoutWrap="wrap" style="font-family: sans-serif; background-color: yellow">
    <span>Trying to reconnect...</span>
    <!-- TODO translate -->
  </div>
  <ng-container *ngIf="(websocket.currentDevice | async) as currentDevice">
    <div *ngIf="!currentDevice.online" fxLayout fxLayoutAlign="center start" fxLayoutWrap="wrap" style="font-family: sans-serif; background-color: yellow">
      <span>Device not connected.</span>
      <!-- TODO translate -->
    </div>
  </ng-container>
  <div fxLayout fxLayoutAlign="center start" fxLayoutWrap="wrap">
    <div fxFlex="100%">
      <router-outlet></router-outlet>
    </div>
  </div>
</md-sidenav-container>